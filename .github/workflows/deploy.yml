name: Deploy Unity Build to GitHub Pages

on:
  push:
    branches:
      - main # –ó–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ –ø—É—à–µ –≤ –≤–µ—Ç–∫—É main

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout üõéÔ∏è
        uses: actions/checkout@v3

      - name: Fix Gzip Encoding üõ†Ô∏è
        run: |
          # –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º —Ñ–∞–π–ª—ã, —É–±–∏—Ä–∞—è .gz
          find ./Build -type f -name "*.gz" -exec sh -c 'mv "$0" "${0%.gz}"' {} \;
          # –ó–∞–º–µ–Ω—è–µ–º —É–ø–æ–º–∏–Ω–∞–Ω–∏—è .gz –≤ —Ñ–∞–π–ª–µ index.html
          sed -i 's/\.gz//g' index.html

      - name: Deploy üöÄ
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: . # –ü—É–±–ª–∏–∫–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤—Å–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
          # publish_branch: gh-pages # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—É–±–ª–∏–∫—É–µ—Ç –≤ –≤–µ—Ç–∫—É gh-pages
